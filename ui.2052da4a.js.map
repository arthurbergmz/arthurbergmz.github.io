{"version":3,"sources":["dom.js","reactivity.js","state.js","ui.js"],"names":["module","exports","elements","reduce","obj","query","el","document","querySelector","click","handler","addEventListener","event","css","property","value","undefined","style","onEnter","e","keyCode","onEsc","initialState","stateMachine","Object","getOwnPropertyNames","machine","propertyObj","HTMLInputElement","element","otherHandler","newValue","target","_core","_lastValue","_state","oldValue","_handler","Proxy","set","receiver","propertyCore","Reflect","appElements","appProperties","seal","mobileMenuMaxHeight","getBoundingClientRect","height","menuOpen","_","classList","add","remove","searchOpen","focus","searchLargeInput","clearButton","length","contains","appState","self","preventDefault","console","log"],"mappings":"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","file":"ui.2052da4a.js","sourceRoot":"..\\app","sourcesContent":["module.exports = function (elements) {\n  return elements.reduce((obj, query) => {\n    const el = document.querySelector(query)\n    obj[query] = {\n      click: (handler) => el.addEventListener('click', (event) => handler(event, el)),\n      css: (property, value) => value === undefined ? el.style[property] : el.style[property] = value === null ? 0 : value,\n      onEnter: (handler) => el.addEventListener('keydown', (e) => {\n        if (e.keyCode !== 13) return\n        handler()\n      }),\n      onEsc: (handler) => el.addEventListener('keydown', (e) => {\n        if (e.keyCode !== 27) return\n        handler()\n      }),\n      el\n    }\n    return obj\n  }, {})\n}","module.exports = function (initialState) {\n  const stateMachine = Object.getOwnPropertyNames(initialState).reduce((machine, property) => {\n    const propertyObj = initialState[property]\n    let value = propertyObj.value;\n    let handler = propertyObj.handler;\n    if (value instanceof HTMLInputElement) {\n      const element = value\n      const otherHandler = handler\n      element.addEventListener('keyup', (e) => {\n        const newValue = e.target.value\n        otherHandler((machine._core[property]._lastValue = machine._state[property]), newValue)\n        machine._state[property] = newValue\n      })\n      value = element.value\n      handler = (oldValue, newValue) => {\n        element.value = newValue\n        otherHandler(oldValue, newValue)\n      }\n    }\n    machine._state[property] = value\n    machine._core[property] = { _lastValue: value, _handler: handler }\n    return machine\n  }, { _state: {}, _core: {} })\n  return new Proxy(stateMachine._state, {\n    set (target, property, value, receiver) {\n      const propertyCore = stateMachine._core[property]\n      propertyCore._handler((propertyCore._lastValue = target[property]), value)\n      return Reflect.set(target, property, value, receiver)\n    }\n  })\n}","import reactivity from './reactivity'\n\nmodule.exports = function (appElements) {\n  const appProperties = Object.seal({\n    mobileMenuMaxHeight: appElements['.app-menu__body'].el.getBoundingClientRect().height\n  })\n  return reactivity({\n    menuOpen: {\n      value: false,\n      handler (_, value) {\n        if (value) {\n          appElements['.app-wrapper'].el.classList.add('app-wrapper--unfocused')\n          appElements['.app-menu'].el.classList.add('app-menu--active')\n          appElements['.app-menu__show-button'].el.classList.add('app-menu__show-button--show-less')\n          appElements['.app-menu__body-wrapper'].css('max-height', appProperties.mobileMenuMaxHeight + 'px')\n          appElements['body'].css('overflow', 'hidden')\n        } else {\n          appElements['.app-wrapper'].el.classList.remove('app-wrapper--unfocused')\n          appElements['.app-menu'].el.classList.remove('app-menu--active')\n          appElements['.app-menu__show-button'].el.classList.remove('app-menu__show-button--show-less')\n          appElements['.app-menu__body-wrapper'].css('max-height', 0)\n          appElements['body'].css('overflow', 'auto')\n        }\n      }\n    },\n    searchOpen: {\n      value: false,\n      handler (_, value) {\n        if (value) {\n          appElements['.app-search-wrapper'].el.classList.add('app-search-wrapper--active')\n          appElements['body'].css('overflow', 'hidden')\n          appElements['.app-search__input'].el.focus()\n        } else {\n          appElements['body'].css('overflow', 'auto')\n          appElements['body'].el.focus()\n          appElements['.app-search-wrapper'].el.classList.remove('app-search-wrapper--active')\n        }\n      }\n    },\n    searchLargeInput: {\n      value: appElements['.app-search__input'].el,\n      handler (_, value) {\n        const clearButton = appElements['.app-search__clear-button'].el\n        if (value && value.length > 0) {\n          if (!clearButton.classList.contains('app-search__clear-button--visible')) {\n            clearButton.classList.add('app-search__clear-button--visible')\n          }\n        } else if (clearButton.classList.contains('app-search__clear-button--visible')) {\n          clearButton.classList.remove('app-search__clear-button--visible')\n        }\n      }\n    }\n  })\n}\n","import './style/_build.scss'\nimport getElements from './dom'\nimport initState from './state'\n\nconst appElements = getElements([\n  'body', '.app-wrapper', '.app-menu', '.app-search-wrapper', '.js-app-header__search-button', '.app-search__input', '.app-search__clear-button', '.app-menu__header', '.app-menu__back-button', '.app-menu__show-button', '.app-menu__body', '.app-menu__body-wrapper'\n])\n\nconst appState = initState(appElements)\n\nappElements['.app-menu__header'].click((e, self) => {\n  if (e.target !== self) {\n    return e.preventDefault()\n  }\n  appState.menuOpen = !appState.menuOpen\n})\n\nappElements['.app-menu'].click((e, self) => {\n  if (e.target !== self) {\n    return e.preventDefault()\n  }\n  appState.menuOpen = false\n})\n\nappElements['.js-app-header__search-button'].click((e) => {\n  e.preventDefault()\n  appState.searchOpen = !appState.searchOpen\n})\n\nappElements['.app-search-wrapper'].click((e, self) => {\n  if (e.target !== self) {\n    return e.preventDefault()\n  }\n  appState.searchOpen = false\n})\n\nappElements['.app-search__clear-button'].click(() => {\n  appState.searchLargeInput = ''\n  appElements['.app-search__input'].el.focus()\n})\n\nappElements['.app-search__input'].onEnter(() => {\n  console.log(appState.searchLargeInput)\n  appState.searchOpen = false\n})\n\nappElements['.app-search__input'].onEsc(() => {\n  appState.searchOpen = false\n})\n\nconsole.log('Hello, world!')"]}